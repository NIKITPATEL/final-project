// primary keys: anything with @id
// foreign keys: refugeeRegionId, refugeeNodeId, & refugeeCampId

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model User {
  id       Int    @id @default(autoincrement())
  username String @unique
  password String
  email    String @unique
  roll     String //this is to distinguish students from professor
}

//one to many: each refugee region can have multiple RefugeeNodes
//creates relationship btwn RefugeeRegion & RefugeeNode models
model RefugeeRegion { //produces refugees
  id                   Int           @id @default(autoincrement())
  name                 String
  orderlyGeneration    Int
  disorderlyGeneration Int
  panicGeneration      Int
  refugeeNodes         RefugeeNode[]
}

//each RefugeeNode can have multiple RefugeeGeneration instances
model RefugeeNode { //red dots (gen points)
  id                     Int                 @id @default(autoincrement())
  name                   String
  refugeeRegionId        Int
  refugeeGenerations     RefugeeGeneration[]
  foodLevel              Int
  healthcareLevel        Int
  administrationLevel    Int
  newRefugees            Int
  totalRefugees          Int
  uncontrollableRefugees Int
  RefugeeRegion          RefugeeRegion       @relation(fields: [refugeeRegionId], references: [id])
}

//allows access to the RefugeeNode associated w specific RefugeeGeneration
//one-to-one: RefugeeGeneration & RefugeeCamp
model RefugeeGeneration { //golden lines
  id             Int          @id @default(autoincrement())
  refugeeNodeId  Int
  generationType String
  capacity       Int
  turnsRemaining Int
  connectToCamp  RefugeeCamp? @relation(fields: [refugeeCampId], references: [id]) //"?" -> relationship is optional
  RefugeeNode    RefugeeNode  @relation(fields: [refugeeNodeId], references: [id])
  refugeeCampId  Int?
}

//one-to-many: each camp can have multiple generation instances
model RefugeeCamp { //blue boxes (camps)
  id                   Int                 @id @default(autoincrement())
  name                 String
  foodLevel            Int
  healthcareLevel      Int
  housingLevel         Int
  administrationLevel  Int
  inDanger             Boolean
  inCrisis             Boolean
  totalRefugeesPresent Int
  refugeeCapacity      Int
  connectingLines      RefugeeGeneration[]
}